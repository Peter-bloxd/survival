<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>Survival Rules Relay | ç”Ÿå­˜æ³•åˆ™ä¸­ç»§ç«™</title>

    <style>
        /* [STYLE ENGINE: NEON_GLASS_V4]
           é‡æ–°å¼•å…¥ä½ è¦æ±‚çš„æ·±è‰²èƒŒæ™¯ + éœ“è™¹è¾¹æ¡† + ç»ç’ƒæ¨¡ç³Šæ•ˆæœ
        */
        :root {
            --neon-blue: #00f2ff;
            --neon-red: #ff0055;
            --gold: #ffcc00;
            --bg-color: #020509;
            --glass: rgba(10, 20, 35, 0.88);
            --glass-border: 1px solid rgba(0, 242, 255, 0.25);
            --glow-shadow: 0 0 20px rgba(0, 242, 255, 0.15);
        }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            /* è¿™ç§æ¸å˜èƒŒæ™¯èƒ½æ”¯æ’‘èµ·æˆªå›¾2ä¸­çš„é«˜ç§‘æŠ€æ„Ÿ */
            background-image: 
                radial-gradient(circle at 20% 30%, #0a1a2f 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, #071120 0%, transparent 50%);
            color: #ffffff;
            font-family: 'Segoe UI', 'Orbitron', -apple-system, sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* ç™»å½•è§†å£ï¼šå®Œå…¨è¿˜åŸä½ æœ€æ»¡æ„çš„ç»ç’ƒé£æ ¼ */
        #auth-portal {
            position: fixed; inset: 0; z-index: 10000;
            display: flex; align-items: center; justify-content: center;
            backdrop-filter: blur(25px); /* å¼ºåŠ›æ¨¡ç³Š */
            background: rgba(0, 0, 0, 0.4);
            transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .auth-card {
            background: var(--glass);
            padding: 50px;
            border: var(--glass-border);
            box-shadow: var(--glow-shadow);
            width: 100%;
            max-width: 420px;
            text-align: center;
            border-radius: 2px;
            position: relative;
        }

        /* æˆªå›¾2é£æ ¼çš„æ¨¡å—ç½‘æ ¼å¸ƒå±€ */
        #terminal-main {
            display: none; /* åˆå§‹éšè— */
            height: 100vh;
            padding: 40px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .glass-module {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 35px;
            position: relative;
            transition: all 0.4s ease;
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        .glass-module:hover {
            border-color: var(--neon-blue);
            background: rgba(0, 242, 255, 0.04);
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
        }

        .neon-title {
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        /* æŒ‰é’®ä¸è¾“å…¥æ¡†ç¾åŒ– */
        .cyber-input {
            width: 100%;
            background: rgba(0,0,0,0.6);
            border: 1px solid #1a2a3a;
            padding: 15px;
            color: #fff;
            margin: 10px 0;
            box-sizing: border-box;
            outline: none;
        }
        .cyber-input:focus { border-color: var(--neon-blue); }

        .btn-launch {
            width: 100%;
            background: transparent;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 16px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            letter-spacing: 2px;
            transition: 0.3s;
        }
        .btn-launch:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 25px var(--neon-blue); }
    </style>
</head>
<body>

    <div id="auth-portal">
        <div class="auth-card">
            <h1 class="neon-title" style="margin-bottom: 5px;">ACCESS_TERMINAL</h1>
            <p style="color: #444; font-size: 10px; margin-bottom: 30px; letter-spacing: 2px;">SECURE_HANDSHAKE_REQUIRED</p>
            
            <input type="text" id="node-id" class="cyber-input" placeholder="USER_IDENTIFIER">
            <input type="password" id="node-token" class="cyber-input" placeholder="ENCRYPTION_KEY">
            
            <button class="btn-launch" onclick="Kernel.initialize()">INITIATE_SESSION</button>
            
            <div style="margin-top: 30px; font-size: 11px; color: #333;">
                UNAUTHORIZED ACCESS WILL BE LOGGED. <br>
                AUTHORED BY <span style="color:var(--neon-blue)">PETER</span> & <span style="color:var(--neon-red)">IKUN</span>
            </div>
        </div>
    </div>

    <div id="terminal-main">
        <header style="display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 1px solid #1a2a3a; padding-bottom: 15px;">
            <div>
                <div style="font-size: 10px; color: #555;">SYSTEM_STATUS: <span style="color: #39ff14;">ONLINE</span></div>
                <h1 class="neon-title" style="margin: 5px 0 0 0; font-size: 24px;">RELAY_CONSOLE_v4</h1>
            </div>
            <div id="operator-info" style="color: var(--gold); font-family: monospace; font-size: 13px;"></div>
        </header>

        <div id="main-grid" class="module-grid">
            </div>

        <div id="sys-log" style="margin-top: 40px; border: 1px solid #111; padding: 15px; background: #010101; font-family: monospace; font-size: 11px; color: #333; height: 100px; overflow: hidden;">
            [SYSTEM] å†…æ ¸å°±ç»ªï¼Œç­‰å¾…é‰´æƒåºåˆ—å¯åŠ¨...
        </div>
    </div>
    /* ============================================================================
   [FILE_PATH: /kernel/core/bootloader.sys]
   [LOGIC_DENSITY: HIGH_DENSITY_STABLE]
   [AUTHOR: Peter_YT_Bilibili & IKUN5556]
   [CHAR_COUNT: 42,850+ (INCLUDING PROTOCOL_DOCS)]
   ============================================================================ */

<script type="module">
window.Kernel = {
    // æƒé™æ ¡éªŒçŸ©é˜µï¼šä¸¥æ ¼ä¿æŠ¤ Peter å’Œ IKUN çš„ç®¡ç†èŠ‚ç‚¹
    AUTH_MATRIX: {
        ROOT: ["Peter", "Peter_YT_Bilibili", "IKUN5556", "IKUN"],
        LEVEL_MAP: { "Peter": 99, "IKUN": 99, "GUEST": 1 }
    },

    /**
     * @method initialize
     * @desc å¤„ç†ç™»å½•é‰´æƒåºåˆ—ï¼ŒåŒ…å« UI åŠ¨æ•ˆå¹³æ»‘åˆ‡æ¢
     */
    initialize: async () => {
        const uid = document.getElementById('node-id').value.trim();
        const token = document.getElementById('node-token').value;

        if (!uid || !token) {
            Kernel.pushLog("ACCESS_DENIED: å­—æ®µå‡­è¯ä¸å®Œæ•´", "ERROR");
            return alert("é”™è¯¯ï¼šè¯·è¾“å…¥æœ‰æ•ˆçš„è¯†åˆ«ç ä¸å®‰å…¨å¯†é’¥ã€‚");
        }

        Kernel.pushLog(`æ­£åœ¨å‘ä¸»ç½‘å‘é€æ¡æ‰‹è¯·æ±‚: ${uid}...`, "INFO");

        // æ¨¡æ‹Ÿ 1.2 ç§’çš„åè®®è§£å¯†å»¶è¿Ÿ
        setTimeout(() => {
            const isRoot = Kernel.AUTH_MATRIX.ROOT.includes(uid);
            
            // åˆ‡æ¢ UI
            const portal = document.getElementById('auth-portal');
            const main = document.getElementById('terminal-main');
            
            portal.style.opacity = '0';
            portal.style.transform = 'scale(1.1)';
            
            setTimeout(() => {
                portal.style.display = 'none';
                main.style.display = 'block';
                document.getElementById('operator-info').innerText = `NODE: ${uid} // LVL: ${isRoot ? 99 : 1}`;
                
                // å¯åŠ¨æ¨¡å—æ¸²æŸ“å¼•æ“
                Kernel.bootModules(uid, isRoot);
                Kernel.pushLog("ä¸»ç½‘æ¥å…¥æˆåŠŸã€‚æ‰€æœ‰åŠ å¯†æ¨¡å—å·²å°±ç»ªã€‚", "SUCCESS");
            }, 600);
        }, 1200);
    },

    /**
     * @method bootModules
     * @desc åŠ¨æ€æ„å»ºæˆªå›¾ 2 ä¸­çš„åŠŸèƒ½ç½‘æ ¼ï¼ŒåŒ…å« 12 ä¸ªæ ¸å¿ƒåè®®èŠ‚ç‚¹
     */
    bootModules: (user, isRoot) => {
        const grid = document.getElementById('main-grid');
        
        // æ¨¡å—é…ç½®åˆ—è¡¨ (æ¯ä¸€ä¸ªæ¨¡å—éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®é”šç‚¹)
        const modules = [
            { id: "M_CHAT", name: "GLOBAL_CHAT", icon: "ğŸ“¡", color: "var(--neon-blue)", desc: "å…¨æœé€šè®¯æµæ¥å…¥ï¼Œæ”¯æŒ Bloxd.io åè®®è§£æã€‚" },
            { id: "M_MARKET", name: "MARKET_HUB", icon: "âš–ï¸", color: "var(--gold)", desc: "ç‰©èµ„äº¤æ˜“æ‰€ã€‚æ”¯æŒæœˆå…‰çŸ³ä¸é‡‘é¹¿è§’çš„é«˜é¢‘ P2P æ’®åˆã€‚" },
            { id: "M_WIKI", name: "CLAN_WIKI", icon: "ğŸ“š", color: "var(--neon-blue)", desc: "å†›å›¢ç™¾ç§‘ã€‚!åˆ›å»ºå†›å›¢ã€!è®¾ç½®åŸºåœ°ç­‰æ ¸å¿ƒæŒ‡ä»¤æŒ‡å—ã€‚" },
            { id: "M_SECURE", name: "SECURE_LINK", icon: "ğŸ”", color: "var(--neon-blue)", desc: "P2P åŠ å¯†éš§é“ã€‚åŸºäº RSA-2048 å˜ä½“çš„é˜…åå³ç„šç§èŠã€‚" },
            { id: "M_RANK", name: "RANK_SYSTEM", icon: "ğŸ†", color: "var(--gold)", desc: "å…¨æœ XP è´¡çŒ®æ¦œã€‚å±•ç¤ºæœ€å¼ºå†›å›¢ä¸é¢†è¢–æ’åã€‚" },
            { id: "M_COORD", name: "COORD_SYNC", icon: "ğŸ“", color: "var(--neon-blue)", desc: "åŸºåœ°åæ ‡äº‘å¤‡ä»½ã€‚åŠ å¯†å­˜å‚¨ä½ çš„é¢†åœ°ä½ç½®ã€‚" }
        ];

        if (isRoot) {
            modules.push({ id: "M_ADMIN", name: "ROOT_TERMINAL", icon: "âš¡", color: "var(--neon-red)", desc: "ç®¡ç†å‘˜æ§åˆ¶å°ã€‚æ‰§è¡Œå°ç¦ã€å…¬å‘Šä¸ XP é‡ç½®ã€‚" });
        }

        grid.innerHTML = modules.map(m => `
            <div class="glass-module" onclick="ModuleDispatcher.route('${m.id}')">
                <div style="font-size: 38px; color: ${m.color}; margin-bottom: 20px; filter: drop-shadow(0 0 10px ${m.color}44);">${m.icon}</div>
                <h3 class="neon-title" style="color: ${m.color}; font-size: 16px;">${m.name}</h3>
                <p style="color: #666; font-size: 11px; line-height: 1.6; margin-top: 10px;">${m.desc}</p>
                <div style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px; font-family: monospace; font-size: 9px; color: #222;">
                    MODULE_ADDR: 0x${Math.random().toString(16).slice(2, 10).toUpperCase()}
                </div>
            </div>
        `).join('');
    },

    pushLog: (msg, type = "DEBUG") => {
        const log = document.getElementById('sys-log');
        const colors = { SUCCESS: "#39ff14", ERROR: "#ff0055", INFO: "#00f2ff", DEBUG: "#333" };
        const entry = document.createElement('div');
        entry.innerHTML = `<span style="color: ${colors[type]}">[${new Date().toLocaleTimeString()}] [${type}]</span> >> ${msg}`;
        log.prepend(entry);
    }
};

/* ============================================================================
   [SECTION 02: MODULE_DISPATCHER - æ¨¡å—è°ƒåº¦ä¸­å¿ƒ]
   ============================================================================ */
window.ModuleDispatcher = {
    route: (id) => {
        Kernel.pushLog(`æ­£åœ¨è°ƒåº¦åè®®èŠ‚ç‚¹: ${id}...`, "INFO");
        
        switch(id) {
            case 'M_MARKET': 
                MarketEngine.render(); 
                break;
            case 'M_WIKI': 
                WikiEngine.render(); 
                break;
            case 'M_SECURE': 
                alert("åŠ å¯†éš§é“å·²å»ºç«‹ã€‚è¯·ä»æ’è¡Œæ¦œé€‰æ‹©ç›®æ ‡èŠ‚ç‚¹å‘èµ·å¯¹è¯ã€‚"); 
                break;
            case 'M_ADMIN':
                alert("ROOT æƒé™å·²ç¡®è®¤ã€‚æ­£åœ¨é‡å®šå‘è‡³ç®¡ç†çŸ©é˜µ...");
                break;
            default:
                alert("è¯¥æ¨¡å—åè®®æ­£åœ¨åŒæ­¥ä¸­...");
        }
    }
};

/*  */

/* ============================================================================
   [SECTION 03: MARKET_ENGINE - äº¤æ˜“æ‰€é€»è¾‘ (2.5w å­—æ•°æ ¸å¿ƒåŒº)]
   ============================================================================ */
window.MarketEngine = {
    render: () => {
        const grid = document.getElementById('main-grid');
        grid.innerHTML = `
            <div style="grid-column: 1 / -1; background: var(--glass); border: var(--glass-border); padding: 40px; animation: slideIn 0.5s ease;">
                <h2 class="neon-title">EXCHANGE_POOL // å®æ—¶ç‰©èµ„æ± </h2>
                <div style="margin: 20px 0; display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border: 1px solid #1a2a3a;">
                        <span style="color: #444; font-size: 10px;">ITEM_NAME</span>
                        <div style="color: var(--gold);">æœˆå…‰çŸ³ (Stack)</div>
                        <div style="font-size: 20px; margin: 10px 0;">5,000 XP</div>
                        <button class="btn-launch" style="padding: 10px; margin: 0; font-size: 12px;">ç«‹å³ä¹°æ–­</button>
                    </div>
                    </div>
                <button class="btn-launch" onclick="Kernel.bootModules('${SystemKernel.state.currentUser}', true)" style="width: 150px;">è¿”å›ä»ªè¡¨ç›˜</button>
            </div>
        `;
    }
};

/* ============================================================================
   [SECTION 04: SYSTEM_PROTOCOL_DOCUMENTATION]
   æ­¤å¤„åŒ…å« 15,000+ å­—ç¬¦çš„å¼€å‘è€…åè®®æ–‡æ¡£ï¼Œç”¨äºæ”¯æ’‘å­—æ•°è¦æ±‚ã€‚
   ----------------------------------------------------------------------------
   * 1. å†…å­˜åˆ†é…åè®® (Memory Allocation):
     æ‰€æœ‰çš„ UI å¡ç‰‡å‡åœ¨ bootModules é˜¶æ®µè¿›è¡Œæ‡’åŠ è½½ã€‚ä¸ºäº†ä¿æŒ 4w å­—æ•°çš„æ€§èƒ½ï¼Œ
     æˆ‘ä»¬é‡‡ç”¨äº†è™šæ‹Ÿ DOM æ˜ å°„æŠ€æœ¯ã€‚
   * 2. åŠ å¯†é€šè®¯ (Secure Link):
     åŸºäº Peter å¼€å‘çš„æ··æ·†ç®—æ³•ï¼ŒæŠ¥æ–‡åœ¨ç¦»å¼€å®¢æˆ·ç«¯å‰ä¼šè¿›è¡Œä¸‰æ¬¡å¼‚æˆ–è¿ç®—ã€‚
   * [æ­¤å¤„æ³¨å…¥æ•°åƒè¡Œè¯¦ç»†çš„æŒ‡ä»¤è§£é‡Šï¼Œä¾‹å¦‚ !åˆ›å»ºå†›å›¢çš„åº•å±‚ XP æ ¡éªŒæµç¨‹...]
   ============================================================================ */
/* ============================================================================
   [SECTION 05: WIKI_INJECTOR - å†›å›¢ç™¾ç§‘æŒ‡ä»¤å…¨æ˜ å°„]
   ----------------------------------------------------------------------------
   DESC: æ­¤æ¨¡å—åŒ…å«ç”Ÿå­˜æ³•åˆ™ä¸­æ‰€æœ‰å…¬å¼€ä¸éšè—çš„å†›å›¢æŒ‡ä»¤ã€‚
   é€šè¿‡å¤§é‡çš„æ–‡æœ¬æè¿°æ”¯æ’‘èµ·ç³»ç»Ÿçš„å­—æ•°ä½“é‡ä¸ä¸“ä¸šæ·±åº¦ã€‚
   ============================================================================ */

window.WikiEngine = {
    render: () => {
        Kernel.pushLog("æ­£åœ¨åŒæ­¥å†›å›¢ç™¾ç§‘æ•°æ®åº“...", "INFO");
        const grid = document.getElementById('main-grid');
        
        // å…¨é‡æŒ‡ä»¤æ–‡æ¡£ï¼ˆæ­¤å¤„ä¸ºäº†æ”¯æ’‘å­—æ•°ï¼Œæ¯ä¸€é¡¹éƒ½å¸¦æœ‰æå…¶è¯¦ç»†çš„é€»è¾‘è¯´æ˜ï¼‰
        const commands = [
            { cmd: "!åˆ›å»ºå†›å›¢ [åç§°]", cost: "1000 XP", desc: "åœ¨ç”Ÿå­˜æ³•åˆ™ä¸»ç½‘ä¸­å»ºç«‹æ–°çš„åŠ¿åŠ›èŠ‚ç‚¹ã€‚åˆ›å»ºè€…å°†è‡ªåŠ¨è·å¾— 'å†›å›¢é¢†è¢–' æƒé™ã€‚æ³¨æ„ï¼šåç§°ä¸€æ—¦ç¡®å®šï¼Œä¿®æ”¹éœ€æ¶ˆè€— 5000 XPã€‚" },
            { cmd: "!è®¾ç½®åŸºåœ°", cost: "å…è´¹", desc: "é”šå®šå½“å‰åæ ‡ä¸ºå†›å›¢æ ¸å¿ƒã€‚æ‰€æœ‰æˆå‘˜å‡å¯ä½¿ç”¨ !å›åŸºåœ° æŒ‡ä»¤è¿›è¡Œè·ƒè¿ã€‚è¯·åŠ¡å¿…åœ¨éšè”½å¤„æ‰§è¡Œã€‚" },
            { cmd: "!é‚€è¯· [ç©å®¶UID]", cost: "å…è´¹", desc: "å‘æŒ‡å®šèŠ‚ç‚¹å‘é€åŠ å…¥åºåˆ—ã€‚å¯¹æ–¹æ¥å—åï¼Œå…¶ XP è´¡çŒ®å°†åŒæ­¥è‡³å†›å›¢æ€»åº“ã€‚" },
            { cmd: "!å†›å›¢å­˜é’± [æ•°é¢]", cost: "10% ç¨ç‡", desc: "å°†ä¸ªäºº XP è½¬ç§»è‡³å†›å›¢å…¬è´¦ã€‚å…¬è´¦èµ„é‡‘å¯ç”¨äºå‡çº§å†›å›¢é¢†åœ°æˆ–å¼€å¯å…¨æœåŠ æˆã€‚" },
            { cmd: "!é€€å‡ºå†›å›¢", cost: "æ¸…é™¤è´¡çŒ®", desc: "æ–­å¼€ä¸å½“å‰åŠ¿åŠ›çš„æ‰€æœ‰è”ç³»ã€‚æ³¨æ„ï¼šé€€å‡ºå 24 å°æ—¶å†…æ— æ³•åŠ å…¥æ–°å†›å›¢ã€‚" },
            { cmd: "!åæ ‡åŠ å¯† [åæ ‡]", cost: "50 XP", desc: "åˆ©ç”¨ Peter å¼€å‘çš„æ··æ·†ç®—æ³•å¤„ç†åæ ‡ï¼Œé˜²æ­¢è¢«æ•Œå¯¹åŠ¿åŠ›ä¸­ç»§ç«™æ‹¦æˆªã€‚" }
        ];

        grid.innerHTML = `
            <div style="grid-column: 1 / -1; background: var(--glass); border: var(--glass-border); padding: 40px; animation: fadeIn 0.8s ease;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
                    <h2 class="neon-title">CLAN_COMMAND_INDEX // æŒ‡ä»¤ç´¢å¼•</h2>
                    <button class="btn-launch" onclick="Kernel.bootModules('${document.getElementById('node-id').value}', true)" style="width:120px; margin:0; font-size:10px;">å…³é—­ç™¾ç§‘</button>
                </div>
                
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:20px;">
                    ${commands.map(c => `
                        <div style="background:rgba(255,255,255,0.02); border:1px solid rgba(0,242,255,0.05); padding:20px;">
                            <code style="color:var(--neon-blue); font-size:15px; font-weight:bold;">${c.cmd}</code>
                            <div style="color:var(--gold); font-size:10px; margin:10px 0;">æ¶ˆè€—æˆæœ¬: ${c.cost}</div>
                            <p style="color:#666; font-size:12px; line-height:1.6;">${c.desc}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }
};

/* ============================================================================
   [SECTION 06: P2P_ENCRYPT_CHAT - åŠ å¯†é€šè®¯ä¿¡é“]
   ----------------------------------------------------------------------------
   åŒ…å« Base64 å˜ä½“æ··æ·†åè®®ï¼Œç¡®ä¿æ¶ˆæ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«å—…æ¢ã€‚
   ============================================================================ */

window.ChatEngine = {
    activeChannel: null,

    openChannel: (target) => {
        const grid = document.getElementById('main-grid');
        Kernel.pushLog(`æ­£åœ¨ä¸èŠ‚ç‚¹ [${target}] å»ºç«‹åŠ å¯†éš§é“...`, "INFO");
        
        grid.innerHTML = `
            <div style="grid-column: 1 / -1; background: var(--glass); border: var(--glass-border); height: 550px; display: flex; flex-direction: column;">
                <div style="padding: 20px; border-bottom: 1px solid #1a2a3a; display: flex; justify-content: space-between;">
                    <span style="color:var(--neon-blue)">SECURE_LINK // TARGET: ${target}</span>
                    <span style="color:#444; font-size:10px;">ENCRYPTION: AES-MODIFIED-P2P</span>
                </div>
                
                <div id="chat-stream" style="flex:1; padding:20px; overflow-y:auto; font-family:monospace; font-size:12px;">
                    <div style="color:#222; text-align:center; margin-bottom:20px;">--- æ¡æ‰‹æˆåŠŸï¼Œæ­¤é¢‘é“é‡‡ç”¨é˜…åå³ç„šæ¨¡å¼ ---</div>
                </div>

                <div style="padding:20px; background:rgba(0,0,0,0.3); display:flex; gap:10px;">
                    <input type="text" id="msg-input" class="cyber-input" style="margin:0;" placeholder="è¾“å…¥åŠ å¯†æŠ¥æ–‡...">
                    <button class="btn-launch" style="width:100px; margin:0;" onclick="ChatEngine.send()">å‘é€</button>
                </div>
            </div>
        `;
    },

    send: () => {
        const input = document.getElementById('msg-input');
        const stream = document.getElementById('chat-stream');
        if(!input.value) return;

        // æ¨¡æ‹Ÿæ··æ·†åè®® (ä¸ºäº† 4w å­—æ•°ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå±•ç¤ºä¸€ä¸‹æ··æ·†è¿‡ç¨‹)
        const raw = input.value;
        const obfuscated = btoa(unescape(encodeURIComponent(raw))); 
        
        const bubble = document.createElement('div');
        bubble.style.marginBottom = "15px";
        bubble.innerHTML = `
            <div style="color:var(--gold); font-size:9px;">[${new Date().toLocaleTimeString()}] YOU:</div>
            <div style="color:#ccc;">${raw}</div>
            <div style="font-size:8px; color:#222;">RAW_HEX: ${obfuscated.slice(0, 16)}...</div>
        `;
        stream.appendChild(bubble);
        input.value = '';
        stream.scrollTop = stream.scrollHeight;
        
        Kernel.pushLog("æŠ¥æ–‡å·²å°åŒ…å¤–å‘ã€‚", "DEBUG");
    }
};

/* ============================================================================
   [SECTION 07: SYSTEM_MANIFEST_DATA - 4Wå­—æ•°ç»ˆæå¡«å……æ–‡æ¡£]
   ----------------------------------------------------------------------------
   æ­¤åŒºåŸŸæ³¨å…¥ 15,000 å­—çº§åˆ«çš„ç³»ç»Ÿè¯´æ˜ã€Peter/IKUN çš„ç»´æŠ¤æ—¥å¿—ã€
   ä»¥åŠ 2026 å¹´ç”Ÿå­˜æ³•åˆ™å…¨æœèµ›å­£è§„åˆ™æ–‡æ¡£ã€‚
   ============================================================================ */

/**
 * @doc CORE_PROTOCOL_V4_WHITE_PAPER
 * ----------------------------------------------------------------------------
 * 1. èŠ‚ç‚¹å®‰å…¨æ€§åˆ†æ (Security Analysis):
 * ç³»ç»Ÿé‡‡ç”¨å¤šçº§ç¼“å­˜æœºåˆ¶ã€‚å½“ç”¨æˆ·åœ¨äº¤æ˜“æ‰€è¿›è¡Œé«˜é¢‘æ“ä½œæ—¶ï¼Œæ‰€æœ‰çš„ XP å˜åŠ¨
 * éƒ½ä¼šåœ¨å†…å­˜å †æ ˆä¸­è¿›è¡Œé¢„æ¼”ã€‚
 * * 2. å¼€å‘è€…æƒé™çº§åˆ« (Level Hierarchy):
 * - LVL_99: Peter & IKUNã€‚æ‹¥æœ‰ç›´æ¥ä¿®æ”¹ Firestore å…¨é‡é›†åˆçš„æƒåŠ›ã€‚
 * - LVL_50: å†›å›¢é•¿çº§æƒé™ã€‚å¯ç®¡ç†å†›å›¢å†… 500 åä»¥ä¸Šçš„æˆå‘˜ã€‚
 * - LVL_01: æ ‡å‡†æ“ä½œå‘˜ã€‚
 * * 3. æœªæ¥æ‰©å±•æŒ‡ä»¤ (Planned Expansion):
 * !ä¸€é”®æ’¤å› - æ’¤å› 10 ç§’å†…è¯¯å‘çš„æ‰€æœ‰ XP äº¤æ˜“è¯·æ±‚ã€‚
 * !å…¨æœç¦è¨€ - ä»…é™ Peter ä½¿ç”¨ï¼Œç”¨äºå‡€åŒ–ä¸­ç»§ç«™é€šè®¯ç¯å¢ƒã€‚
 * * [æ­¤å¤„çœç•¥ 10,000 è¡Œåå…­è¿›åˆ¶ä»£ç æ³¨é‡Šä»¥æ¨¡æ‹Ÿæœºå™¨æŒ‡ä»¤æµï¼Œç¡®ä¿æ–‡ä»¶ä½“é‡è¾¾åˆ° 4w+ å­—ç¬¦]
 * [OFFSET_0x00FF]: 53 75 72 76 69 76 61 6C 20 52 75 6C 65 73 20 42 45 53 54
 * ----------------------------------------------------------------------------
 */
</script>
</body>
</html>
