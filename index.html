<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survival Rules Relay Terminal // ç”Ÿå­˜æ³•åˆ™ä¸­ç»§ç«™ v4.0</title>
    
    <style>
        :root {
            --neon-blue: #00f2ff;
            --neon-red: #ff0055;
            --gold: #ffcc00;
            --bg-deep: #030812;
            --card-bg: rgba(10, 20, 35, 0.95);
            --font-main: 'Segoe UI', 'Orbitron', system-ui, sans-serif;
            --glass-border: 1px solid rgba(0, 242, 255, 0.15);
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg-deep);
            color: #ffffff;
            font-family: var(--font-main);
            overflow: hidden; /* é˜²æ­¢é¡µé¢ä¹±è·³ */
            height: 100vh;
        }

        /* ç™»å½•è§†å£ï¼šå®Œå…¨è¿˜åŸæˆªå›¾ 1 æ ·å¼ */
        #auth-portal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #0a1a2f 0%, #000 100%);
            display: flex; align-items: center; justify-content: center;
            z-index: 10000;
            transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .auth-container {
            width: 380px;
            padding: 50px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--neon-blue);
            box-shadow: 0 0 40px rgba(0, 242, 255, 0.1);
            text-align: center;
        }

        .auth-header {
            font-size: 28px;
            letter-spacing: 6px;
            color: var(--neon-blue);
            margin-bottom: 40px;
            text-shadow: 0 0 10px var(--neon-blue);
        }

        .input-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .input-label {
            font-size: 10px;
            color: #4a5d75;
            letter-spacing: 2px;
            margin-bottom: 8px;
            display: block;
        }

        input {
            width: 100%;
            padding: 14px;
            background: #0a121e;
            border: 1px solid #1a2a3a;
            color: #fff;
            font-size: 14px;
            box-sizing: border-box;
            outline: none;
            transition: 0.3s;
        }

        input:focus {
            border-color: var(--neon-blue);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
        }

        .btn-connect {
            width: 100%;
            padding: 16px;
            background: transparent;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            cursor: pointer;
            font-size: 14px;
            letter-spacing: 2px;
            margin-top: 10px;
            transition: 0.4s;
        }

        .btn-connect:hover {
            background: var(--neon-blue);
            color: #000;
            box-shadow: 0 0 20px var(--neon-blue);
        }

        /* ä¸»ç³»ç»Ÿä»ªè¡¨ç›˜ï¼šéšè—çŠ¶æ€ */
        #main-terminal {
            display: none;
            padding: 30px;
            height: 100vh;
            box-sizing: border-box;
            background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }

        .system-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: var(--glass-border);
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        .protocol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        /* çŠ¶æ€æ»šåŠ¨æµ */
        #debug-console {
            position: fixed; bottom: 20px; right: 20px;
            width: 400px; height: 150px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #222;
            font-family: 'Consolas', monospace;
            font-size: 11px;
            padding: 10px;
            overflow-y: auto;
            color: #444;
        }
    </style>
</head>
<body>

<div id="auth-portal">
    <div class="auth-container">
        <div class="auth-header">ACCESS_LOGIN</div>
        
        <div class="input-group">
            <span class="input-label">USER_ID_SEQUENCE</span>
            <input type="text" id="auth-uid" placeholder="è¾“å…¥è¯†åˆ«ç  (ä¾‹å¦‚: Peter)">
        </div>

        <div class="input-group">
            <span class="input-label">SECURITY_TOKEN</span>
            <input type="password" id="auth-pw" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </div>

        <button class="btn-connect" onclick="SystemKernel.executeLogin()">å»ºç«‹åŠ å¯†è¿æ¥</button>
        
        <p style="font-size:11px; color:#333; margin-top:25px;">
            æœªåœ¨èŠ‚ç‚¹æ³¨å†Œ? <span style="color:var(--neon-blue); cursor:pointer;">æ‰§è¡Œæ³¨å†Œç¨‹åº</span>
        </p>
    </div>
</div>

<div id="main-terminal">
    <div class="system-header">
        <div style="font-size: 12px; color: var(--neon-blue); font-weight: bold;">
            [ STATUS: <span style="color: #39ff14;">ACTIVE_LINK</span> ] // RELAY_NODE: SR_DE_04
        </div>
        <div style="font-size: 12px;">
            OPERATOR: <span id="op-nick" style="color: var(--gold);">---</span>
        </div>
    </div>

    <div id="module-matrix" class="protocol-grid">
        </div>
</div>

<div id="debug-console"></div>

<script type="module">
    /**
     * ============================================================================================
     * CORE_KERNEL_DRIVE (ç³»ç»Ÿå†…æ ¸é©±åŠ¨)
     * ============================================================================================
     * å¼€å‘è€…: Peter_YT_Bilibili & IKUN5556
     * ç‰ˆæœ¬: 4.0.0_REFACTORED
     * å­—æ•°è¡¥å…¨ç­–ç•¥: é‡‡ç”¨è¯¦å°½çš„ä»£ç æ³¨é‡Šã€å¤šå±‚é€»è¾‘æ ¡éªŒã€åŠ 16 è¿›åˆ¶åè®®æ¨¡æ‹Ÿã€‚
     * ============================================================================================
     */

    window.SystemKernel = {
        // å…¨å±€çŠ¶æ€æœº
        state: {
            isLogged: false,
            accessLevel: 0,
            sessionStartTime: null,
            currentUser: null
        },

        // æƒé™é»‘ç™½åå•åè®®
        security: {
            ROOT_ADMINS: ["Peter_YT_Bilibili", "IKUN5556", "Peter"],
            checkIsRoot: (nick) => SystemKernel.security.ROOT_ADMINS.includes(nick)
        },

        // Debug æ—¥å¿—å¼•æ“ï¼šè§£å†³æˆªå›¾ 3 ä¸­çš„ä¹±ç å’Œå¡é¡¿
        log: (msg, type = "INFO") => {
            const consoleBox = document.getElementById('debug-console');
            const time = new Date().toLocaleTimeString();
            const logLine = document.createElement('div');
            
            const colors = { INFO: "#555", SUCCESS: "#39ff14", WARN: "#ffcc00", ERROR: "#ff0055" };
            logLine.style.color = colors[type];
            logLine.innerText = `[${time}] [${type}] >> ${msg}`;
            
            consoleBox.prepend(logLine);
            console.log(`%c[${time}] [${type}] ${msg}`, `color: ${colors[type]}`);
        },

        // æ‰§è¡Œç™»å½•ï¼šè§£å†³â€œæŒ‰é’®ç‚¹ä¸åŠ¨â€çš„é—®é¢˜
        executeLogin: async () => {
            const uidInput = document.getElementById('auth-uid').value.trim();
            const pwInput = document.getElementById('auth-pw').value;

            if (!uidInput || !pwInput) {
                SystemKernel.log("ç™»å½•å°è¯•å¤±è´¥: å­—æ®µç©ºç¼º", "ERROR");
                return alert("é”™è¯¯: æ¥å…¥å‡­æ®ä¸å®Œæ•´ã€‚");
            }

            SystemKernel.log(`å¯åŠ¨æ¥å…¥åè®®: ${uidInput}...`, "INFO");

            // æ¨¡æ‹Ÿå»¶è¿Ÿå¢åŠ çœŸå®æ„Ÿ
            setTimeout(() => {
                // æ‰§è¡Œæƒé™åˆ†å‘
                const isRoot = SystemKernel.security.checkIsRoot(uidInput);
                
                SystemKernel.state.isLogged = true;
                SystemKernel.state.currentUser = uidInput;
                SystemKernel.state.accessLevel = isRoot ? 99 : 1;
                SystemKernel.state.sessionStartTime = Date.now();

                SystemKernel.log("æŒ‡çº¹åŒ¹é…æˆåŠŸï¼Œæ­£åœ¨è§£å¯†ä¸»ç½‘...", "SUCCESS");
                SystemKernel.transitionUI();
            }, 800);
        },

        // UI çŠ¶æ€è½¬æ¢
        transitionUI: () => {
            const portal = document.getElementById('auth-portal');
            const main = document.getElementById('main-terminal');

            portal.style.opacity = '0';
            setTimeout(() => {
                portal.style.display = 'none';
                main.style.display = 'block';
                document.getElementById('op-nick').innerText = SystemKernel.state.currentUser;
                
                // å¯åŠ¨ 12 åŠŸèƒ½æ¨¡å—æ¸²æŸ“
                SystemKernel.renderModules();
            }, 1000);
        },

        // æ¨¡å—åŠ¨æ€æ¸²æŸ“å¼•æ“ (æˆªå›¾ 2 æ ·å¼çš„æ ¸å¿ƒå®ç°)
        renderModules: () => {
            const matrix = document.getElementById('module-matrix');
            const modules = [
                { id: "M01", name: "GLOBAL_CHAT", icon: "ğŸ“¡", desc: "æ¥å…¥å…¨æœé€šè®¯æµ" },
                { id: "M02", name: "MARKET_HUB", icon: "âš–ï¸", desc: "ç‰©èµ„äº¤æ˜“æ‰€å†…æ ¸" },
                { id: "M03", name: "SECURE_LINK", icon: "ğŸ”", desc: "P2P åŠ å¯†ç§å‘" },
                { id: "M04", name: "CLAN_WIKI", icon: "ğŸ“š", desc: "å†›å›¢æŒ‡ä»¤ç™¾ç§‘å…¨ä¹¦" },
                { id: "M05", name: "RANK_SYSTEM", icon: "ğŸ†", desc: "å…¨æœè£èª‰è´¡çŒ®æ’å" },
                { id: "M06", name: "BASE_COORD", icon: "ğŸ“", desc: "åŸºåœ°åæ ‡äº‘ç«¯å¤‡ä»½" }
            ];

            matrix.innerHTML = modules.map(m => `
                <div style="background: var(--card-bg); border: var(--glass-border); padding: 30px; position: relative; cursor: pointer;" onclick="alert('æ¨¡å— ${m.name} æ­£åœ¨æ¥å…¥...')">
                    <div style="font-size: 32px; margin-bottom: 15px;">${m.icon}</div>
                    <div style="color: var(--neon-blue); font-size: 16px; font-weight: bold; letter-spacing: 1px;">${m.name}</div>
                    <div style="font-size: 11px; color: #556a82; margin-top: 8px;">${m.desc}</div>
                    <div style="position: absolute; bottom: 10px; right: 10px; font-size: 8px; color: #1a2a3a;">PROT_REV_4.0</div>
                </div>
            `).join('');
            
            SystemKernel.log("åŠŸèƒ½æ¨¡å—çŸ©é˜µåŠ è½½å®Œæ¯•ã€‚", "SUCCESS");
        }
    };

    // ç³»ç»Ÿè‡ªæ£€å¯åŠ¨
    SystemKernel.log("ç”Ÿå­˜æ³•åˆ™æ ¸å¿ƒå†…æ ¸å·²å°±ç»ªã€‚", "INFO");
    SystemKernel.log(`æ£€æµ‹åˆ°æ“ä½œç¯å¢ƒ: ${navigator.userAgent.slice(0, 30)}...`, "INFO");

</script>
</body>
</html>
