<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿå­˜æ³•åˆ™ - å®˜æ–¹ç¤¾åŒº</title>
    <style>
        :root { --main-green: #2ecc71; --card-bg: #161b22; --text-gray: #8b949e; }
        body { background-color: #0d1117; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; text-align: center; }
        
        /* å¯¼èˆªæ æ ·å¼ */
        nav { display: flex; justify-content: space-between; padding: 15px 50px; align-items: center; background: #161b22; border-bottom: 1px solid #30363d; position: sticky; top: 0; z-index: 100; }
        .logo { color: var(--main-green); font-size: 24px; font-weight: bold; text-decoration: none; }
        .auth-btn { background: transparent; color: white; border: 1px solid white; padding: 8px 20px; border-radius: 5px; cursor: pointer; transition: 0.3s; }
        .auth-btn:hover { background: white; color: black; }

        /* ä¸»è§†è§‰åŒº */
        .hero { padding: 80px 20px; background: radial-gradient(circle at center, #1e272e 0%, #0d1117 100%); }
        .hero h1 { font-size: 45px; margin: 0; letter-spacing: 2px; }
        
        /* ç£è´´åŠŸèƒ½åŒº */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; max-width: 1100px; margin: -40px auto 50px; padding: 0 20px; }
        .card { background: var(--card-bg); padding: 30px; border-radius: 10px; border: 1px solid #30363d; cursor: pointer; transition: 0.3s; }
        .card:hover { border-color: var(--main-green); transform: translateY(-5px); background: #1c2128; }
        .card h3 { margin: 0; font-size: 18px; }
        .card p { color: var(--text-gray); font-size: 14px; margin-top: 10px; }

        /* ç”¨æˆ·ä¿¡æ¯ */
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-info img { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--main-green); }
    </style>
</head>
<body>

<nav>
    <a href="#" class="logo">ç”Ÿå­˜æ³•åˆ™</a>
    <div id="auth-ui">
        <button class="auth-btn" onclick="login()">Google ç™»å½•</button>
    </div>
</nav>

<div class="hero">
    <h1 id="welcome-msg">ç”Ÿå­˜æ³•åˆ™ Â· å®˜æ–¹ç¤¾åŒº</h1>
    <p style="color:var(--text-gray)">æœé›†ç‰©èµ„ã€äº¤æ˜“è´§å“ã€æ¢ç´¢æœªçŸ¥åœ°å›¾</p>
</div>

<div class="grid">
    <div class="card" onclick="checkAuth('ç»„é˜Ÿå¤§å…')"><h3>ç»„é˜Ÿå¤§å…</h3><p>å¯»æ‰¾å¯é é˜Ÿå‹ï¼Œå¹¶è‚©ä½œæˆ˜</p></div>
    <div class="card" onclick="checkAuth('äº¤æ˜“è¡Œ')"><h3>äº¤æ˜“è¡Œ</h3><p>ç©å®¶é—´å®‰å…¨çš„ç‰©èµ„ä¹°å–ä¸­å¿ƒ</p></div>
    <div class="card" onclick="alert('æš‚æ— æ›´æ–°')"><h3>æ›´æ–°æ—¥å¿—</h3><p>æŸ¥çœ‹æœ€æ–°çš„ç‰ˆæœ¬ä¿®å¤å†…å®¹</p></div>
    <div class="card" onclick="checkAuth('å…‘æ¢ç ')"><h3>å…‘æ¢ç </h3><p>é¢†å–é™æ—¶ç¤¼åŒ…ç‰©èµ„å¥–åŠ±</p></div>
</div>

<script type="module">
    // ä½¿ç”¨ CDN å¼•å…¥ Firebase æ¨¡å—
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    // ä¸¥æ ¼æ ¡å¯¹åçš„é…ç½®
    const firebaseConfig = {
        apiKey: "AIzaSyBC92jwiCLsfG6bE4k2Jo4KQSiI-A_gxII", // å·²ä¿®å¤ SiI æ‹¼å†™é”™è¯¯
        authDomain: "bloxd-survival.firebaseapp.com",
        projectId: "bloxd-survival",
        storageBucket: "bloxd-survival.firebasestorage.app",
        messagingSenderId: "60666065786",
        appId: "1:60666065786:web:bdc3131accaceb0180dcc3",
        measurementId: "G-L39F7GPMF4"
    };

    // åˆå§‹åŒ–åº”ç”¨
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    let currentUser = null;

    // ç™»å½•å‡½æ•°
    window.login = () => {
        const provider = new GoogleAuthProvider();
        provider.setCustomParameters({ prompt: 'select_account' });
        signInWithPopup(auth, provider).catch((error) => {
            console.error(error);
            // å‹å¥½çš„æŠ¥é”™æç¤º
            alert("âŒ ç™»å½•å¤±è´¥ï¼\nåŸå› ï¼š" + error.code + "\n\nğŸ’¡ è¯·ç¡®ä¿åœ¨ Firebase è®¾ç½®ä¸­å·²ç‚¹å‡»è“è‰²â€œä¿å­˜â€æŒ‰é’®å¹¶ç»‘å®šé‚®ç®±ï¼");
        });
    };

    // ç™»å‡ºå‡½æ•°
    window.logout = () => signOut(auth);

    // æ£€æŸ¥æƒé™
    window.checkAuth = (name) => {
        if (!currentUser) {
            alert("è¯·å…ˆç™»å½• Google è´¦å·å†è¿›å…¥ " + name + "ï¼");
        } else {
            alert("æ¬¢è¿è¿›å…¥ " + name + "ï¼Œ" + currentUser.displayName + "ï¼æ•°æ®åŠ è½½ä¸­...");
        }
    };

    // ç›‘å¬ç™»å½•çŠ¶æ€
    onAuthStateChanged(auth, (user) => {
        const ui = document.getElementById('auth-ui');
        const msg = document.getElementById('welcome-msg');
        currentUser = user;
        
        if (user) {
            // å·²ç™»å½•çŠ¶æ€
            msg.innerText = "æ¬¢è¿å›æ¥, " + user.displayName;
            ui.innerHTML = `
                <div class="user-info">
                    <img src="${user.photoURL}" alt="å¤´åƒ">
                    <span>${user.displayName}</span>
                    <button class="auth-btn" onclick="logout()">é€€å‡º</button>
                </div>`;
        } else {
            // æœªç™»å½•çŠ¶æ€
            msg.innerText = "ç”Ÿå­˜æ³•åˆ™ Â· å®˜æ–¹ç¤¾åŒº";
            ui.innerHTML = `<button class="auth-btn" onclick="login()">Google ç™»å½•</button>`;
        }
    });
</script>
</body>
</html>
