<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿå­˜æ³•åˆ™ - å®˜æ–¹ç¤¾åŒº</title>
    <style>
        :root { --main-green: #2ecc71; --card-bg: #161b22; --border: #30363d; }
        body { background-color: #0d1117; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* å¯¼èˆªä¸åŸºç¡€æ ·å¼ */
        nav { display: flex; justify-content: space-between; padding: 15px 30px; align-items: center; background: #161b22; border-bottom: 1px solid var(--border); }
        .logo { color: var(--main-green); font-size: 22px; font-weight: bold; text-decoration: none; }
        .auth-btn { background: var(--main-green); color: black; border: none; padding: 8px 18px; border-radius: 5px; cursor: pointer; font-weight: bold; }

        /* é€šçŸ¥ç³»ç»Ÿ */
        #toast-container { position: fixed; top: 20px; right: 20px; z-index: 9999; }
        .toast { background: #21262d; border-left: 4px solid var(--main-green); color: white; padding: 15px 25px; margin-bottom: 10px; border-radius: 4px; box-shadow: 0 4px 12px rgba(0,0,0,0.5); }

        /* æ³¨å†Œ/ç™»å½•å¼¹çª— */
        .modal-overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index: 2000; }
        .modal { position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#21262d; padding:30px; border-radius:10px; width:300px; border:1px solid var(--main-green); }
        .input-group { position: relative; width: 100%; margin: 15px 0; }
        .modal input { width: 100%; padding: 10px; background: #0d1117; border: 1px solid var(--border); color: white; border-radius: 5px; box-sizing: border-box; }
        
        /* æ˜¾ç¤ºå¯†ç çš„å°çœ¼ç›å›¾æ ‡ */
        .eye-icon { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--text-gray); font-size: 14px; user-select: none; }

        .tab-group { display: flex; gap: 20px; margin-bottom: 20px; border-bottom: 1px solid var(--border); }
        .tab { padding-bottom: 5px; cursor: pointer; color: var(--text-gray); }
        .tab.active { color: var(--main-green); border-bottom: 2px solid var(--main-green); }

        /* ç½‘æ ¼å¸ƒå±€ */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        .card { background: #161b22; padding: 25px; border-radius: 8px; border: 1px solid var(--border); cursor: pointer; transition: 0.3s; text-align: center; }
        .card:hover { border-color: var(--main-green); transform: translateY(-3px); }
    </style>
</head>
<body>

<div id="toast-container"></div>

<nav>
    <a href="#" class="logo">ç”Ÿå­˜æ³•åˆ™ Â· ç¤¾åŒº</a>
    <div id="auth-ui"></div>
</nav>

<div class="grid">
    <div class="card" onclick="notify('ç»„é˜Ÿå¤§å…åŠ è½½ä¸­...')"><h3>ğŸ’¬ ç»„é˜Ÿå¤§å…</h3><p>å¯»æ‰¾é˜Ÿå‹å¹¶è‚©ä½œæˆ˜</p></div>
    <div class="card" onclick="notify('äº¤æ˜“è¡Œå³å°†å¼€æ”¾')"><h3>âš–ï¸ äº¤æ˜“è¡Œ</h3><p>ç‰©èµ„äº’æ¢ä¸­å¿ƒ</p></div>
</div>

<div class="modal-overlay" id="modal-overlay">
    <div class="modal">
        <div class="tab-group">
            <div id="tab-login" class="tab active" onclick="switchTab('login')">ç™»å½•</div>
            <div id="tab-reg" class="tab" onclick="switchTab('reg')">æ³¨å†Œ</div>
        </div>

        <div class="input-group" id="nick-group" style="display:none;">
            <input type="text" id="auth-name" placeholder="æ¸¸æˆæ˜µç§°">
        </div>

        <div class="input-group">
            <input type="text" id="auth-id" placeholder="ç™»å½• ID">
        </div>

        <div class="input-group">
            <input type="password" id="auth-pw" placeholder="å¯†ç ">
            <span class="eye-icon" onclick="togglePassword()">ğŸ‘ï¸</span>
        </div>

        <button class="auth-btn" style="width:100%; margin-top:10px" id="submit-btn" onclick="handleSubmit()">ç¡®å®š</button>
        <button class="auth-btn" style="width:100%; margin-top:10px; background:none; color:white; border:1px solid var(--border)" onclick="hideModal()">å–æ¶ˆ</button>
    </div>
</div>

<script>
    let mode = 'login'; // é»˜è®¤ä¸ºç™»å½•æ¨¡å¼
    let currentUser = JSON.parse(localStorage.getItem('user'));

    // åˆ‡æ¢ ç™»å½•/æ³¨å†Œ æ ‡ç­¾
    window.switchTab = (target) => {
        mode = target;
        document.getElementById('tab-login').className = target === 'login' ? 'tab active' : 'tab';
        document.getElementById('tab-reg').className = target === 'reg' ? 'tab active' : 'tab';
        document.getElementById('nick-group').style.display = target === 'reg' ? 'block' : 'none';
        document.getElementById('submit-btn').innerText = target === 'reg' ? 'ç«‹å³æ³¨å†Œ' : 'ç«‹å³ç™»å½•';
    };

    // æ˜¾ç¤º/éšè—å¯†ç åŠŸèƒ½
    window.togglePassword = () => {
        const pwInput = document.getElementById('auth-pw');
        if (pwInput.type === 'password') {
            pwInput.type = 'text';
        } else {
            pwInput.type = 'password';
        }
    };

    // å¤„ç†æäº¤ï¼ˆç™»å½•æˆ–æ³¨å†Œï¼‰
    window.handleSubmit = () => {
        const id = document.getElementById('auth-id').value;
        const pw = document.getElementById('auth-pw').value;
        const name = document.getElementById('auth-name').value;

        if (!id || !pw) return notify("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼");

        if (mode === 'reg') {
            if (!name) return notify("è¯·å¡«å†™æ˜µç§°ï¼");
            if (localStorage.getItem('saved_user_' + id)) return notify("è¯¥ ID å·²è¢«æ³¨å†Œï¼");
            
            const userData = { id, pw, name };
            localStorage.setItem('saved_user_' + id, JSON.stringify(userData));
            loginUser(userData);
            notify("æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿ " + name);
        } else {
            const saved = localStorage.getItem('saved_user_' + id);
            if (!saved) return notify("è´¦å·ä¸å­˜åœ¨ï¼Œè¯·å…ˆæ³¨å†Œï¼");
            
            const userData = JSON.parse(saved);
            if (userData.pw !== pw) return notify("å¯†ç é”™è¯¯ï¼");
            
            loginUser(userData);
            notify("æ¬¢è¿å›æ¥ï¼Œ" + userData.name);
        }
    };

    function loginUser(data) {
        localStorage.setItem('user', JSON.stringify(data));
        currentUser = data;
        hideModal();
        updateUI();
    }

    window.updateUI = () => {
        const ui = document.getElementById('auth-ui');
        if (currentUser) {
            ui.innerHTML = `<span style="margin-right:15px">ğŸ‘¤ ${currentUser.name}</span><button class="auth-btn" onclick="logout()" style="background:#e74c3c; color:white;">é€€å‡º</button>`;
        } else {
            ui.innerHTML = `<button class="auth-btn" onclick="showModal()">æ³¨å†Œ / ç™»å½•</button>`;
        }
    };

    window.notify = (text) => {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.innerText = text;
        container.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    };

    window.showModal = () => document.getElementById('modal-overlay').style.display = 'block';
    window.hideModal = () => document.getElementById('modal-overlay').style.display = 'none';
    window.logout = () => { localStorage.removeItem('user'); location.reload(); };

    updateUI();
</script>
</body>
</html>
